<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- jQuery -->
  <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <!-- iamport.payment.js-->
  <script type="text/javascript" src="https://cdn.iamport.kr/js/iamport.payment-1.2.0.js"></script>
  <title>호텔</title>
</head>

<body>
  <div>
    <h2>IAMPORT 결제 데모</h2>
    <li> <button id="iamportPayment" type="button">결제테스트</button> </li>

  </div>
  <script> //문서가 준비되면 제일 먼저 실행

    $(document).ready(function () {
      $("#iamportPayment").click(function () {
        iamportPayment(); //버튼 클릭하면 호출
      });
    }) //버튼 클릭하면 실행
    function iamportPayment() {
      var IMP = window.IMP; // 생략 가능
      IMP.init('imp63442658');//아임포트 관리자 콘솔에서 확인한 '가맹점 식별코드' 입력 / 예: imp00000000
      IMP.request_pay({// param
        // pg: "kakaopay", //pg사명 or pg사명.CID (잘못 입력할 경우, 기본 PG사가 띄워짐)
        pg: "html5_inicis", //pg사명 or pg사명.CID (잘못 입력할 경우, 기본 PG사가 띄워짐)
        pay_method: "card", //지불 방법
        merchant_uid: "order_no_0005",//가맹점 주문번호 (아임포트를 사용하는 가맹점에서 중복되지 않은 임의의 문자열을 입력)
        name: "주문명:결제테스트", //결제창에 노출될 상품명
        amount: 20000, //금액
        buyer_email: "choonsik@naver.com",
        buyer_name: "춘식이",
        buyer_tel: "01012341234",
        buyer_addr: '서울특별시 강남구 삼성동',
        buyer_postcode: '123-456',
        m_redirect_url: '{http://localhost:8080/iamport}' // 예: https://www.my-service.com/payments/complete/mobile
      }, function (rsp) { // callback 로직
        if (rsp.success) {
          alert("[완료] imp_uid : " + rsp.imp_uid + " / merchant_uid : " + rsp.merchant_uid);
        } else {
          alert("[실패]코드(" + rsp.error_code + ") / 메세지(" + rsp.error_msg + ")");
        }
      });
    }

  </script>
</body>

</html>