<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <title>Project</title>
</head>

<body style="background-image: url(../img/space8.jpg);">
    <div th:replace="~{/fragment/header.html :: fragment-header}"></div>
    <div style="height: 100px; width: 100%;"></div>
    <!-- 헤더 불러오기 -->

    <!-- 지도크기 정하기 -->
    <div id="map" style="width:100%;height:500px;"></div>
    <p><em>지도를 확대 또는 축소 해주세요!</em></p>
    <!-- 확대 축소 레벨 -->
    <p id="result"></p>
    <!-- 인포윈도우 테스트 출력 -->
    <div style="color: red;">5.0★★★★★<span style="color: gray;">(777건)|리뷰 99</span></div>(77건)
    <div>강원특별자치도 영월군 영월읍 갤럭시펠리스길 397</div>
    <div>777-8888-9999</div>
    <div>홈페이지</div>
    <!-- appkey는 카카오톡에서 javascript APP KEY를 넣으면 된다. -->
    <script type="text/javascript"
        src="//dapi.kakao.com/v2/maps/sdk.js?appkey=72870684bb5620c6901cc799241f0673"></script>
    <script src="@{/js/kakaoMap/zoomControl.js}"></script>
    <script>
        var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
            mapOption = {
                center: new kakao.maps.LatLng(37.1992321, 128.485817), // 지도의 중심좌표
                level: 3 // 지도의 확대 레벨, 숫자가 낮을수록 확대됨.
            };

        // 지도를 생성 
        var map = new kakao.maps.Map(mapContainer, mapOption);

        // 지도 확대 축소를 제어할 수 있는  줌 컨트롤을 생성합니다
        var zoomControl = new kakao.maps.ZoomControl();
        map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);
        // 지도가 확대 또는 축소되면 마지막 파라미터로 넘어온 함수를 호출하도록 이벤트를 등록합니다
        kakao.maps.event.addListener(map, 'zoom_changed', function () {

            // 지도의 현재 레벨을 얻어옵니다
            var level = map.getLevel();

            var message = '현재 지도 레벨은 ' + level + ' 입니다';
            var resultDiv = document.getElementById('result');
            resultDiv.innerHTML = message;
        });

        // 마커가 표시될 위치입니다 
        var markerPosition = new kakao.maps.LatLng(37.19942631621606, 128.48569087551692);

        // 마커를 생성합니다
        var marker = new kakao.maps.Marker({
            position: markerPosition,
            draggable: true, // 마커를 드래그 가능하도록 설정한다
        });


        // 마커가 지도 위에 표시되도록 설정합니다
        marker.setMap(map);

        // 커스텀 오버레이를 생성하고 지도에 표시한다
        var customOverlay = new kakao.maps.CustomOverlay({
            map: map,
            content: '<div style="padding:0 5px;background:#fff;">갤럭시 펠리스</div>',
            position: new kakao.maps.LatLng(37.19942631621606, 128.48569087551692), // 커스텀 오버레이를 표시할 좌표
            xAnchor: 0.5, // 컨텐츠의 x 위치
            yAnchor: 0.5 // 컨텐츠의 y 위치
        });

        // 인포윈도우에 표출될 내용으로 HTML 문자열이나 document element가 가능합니다
        var iwContent = `<div style="padding:5px; color="blue"><a href="/">갤럭시 펠리스</a></div>
<div style="color: red;">5.0★★★★★<span style="color: gray;">(777건)| 리뷰 99</span></div>
<div>강원특별자치도 영월군 영월읍 갤럭시펠리스길 397</div>
<div>777-8888-9999</div>
<div><a href="/">홈페이지</a></div>
`,
            // removeable 속성을 ture 로 설정하면 인포윈도우를 닫을 수 있는 x버튼이 표시됩니다 
            iwRemoveable = true;

        // 인포윈도우를 생성합니다
        var infowindow = new kakao.maps.InfoWindow({
            content: iwContent,
            removable: iwRemoveable
        });

        // 마커에 클릭이벤트를 등록합니다
        kakao.maps.event.addListener(marker, 'click', function () {
            // 마커 위에 인포윈도우를 표시합니다
            infowindow.open(map, marker);
        });



    </script>
</body>

</html>